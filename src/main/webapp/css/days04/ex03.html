<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Insert title here</title>
  <link rel="shortcut icon" type="image/x-icon" href="http://localhost/webPro/images/SiSt.ico">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<style>
    *{
        box-sizing: border-box;
    }

    body{
        border: 1px solid red;
        padding: 20px;
        font-family: Arial;

        margin: 0 auto;/*가운데 정렬*/
        max-width: 800px;
        height: 100%;

    }

    .row::after{
        content: "";
        clear: both;
        display: table;
    }


</style>


<style>
/* <!-- 막대그래프 그리기 css --> */
 .row .side{
    float: left;
    width: 15%;
    margin-top: 10px;
 }

 .row .middle{
    float: left;
    width: 70%
 }
 .row .middle .bar-container{
    width: 100%;
    background-color: #f1f1f1;
    text-align: center;
    color: white;
 }

 .row .right{
    text-align: right;
 }

 .row .bar-container .bar-1{
    background-color: red;
    height: 18px;
    width: 20%;
 }
 .row .bar-container .bar-2{
    background-color: green;
    height: 18px;
    width: 80%;
 }
 .row .bar-container .bar-3{
    background-color: blue;
    height: 18px;
    width: 15%;
 }
 .row .bar-container .bar-4{
    background-color: yellow;
    height: 18px;
    width: 55% ;
 }

</style>
</head>
<body>
<h3>설문조사 - 막대그래프</h3>

<div class="row">
    <div class="side">
        <div>1 star</div>
    </div>
<div class="middle">
    <div class="bar-container">
        <div class="bar-1"></div>
    </div>
</div>
<div class="side right">
    <div>20</div>
</div>
</div>

<div class="row">
    <div class="side">
        <div>2 star</div>
    </div>
<div class="middle">
    <div class="bar-container">
        <div class="bar-2"></div>
    </div>
</div>
<div class="side right">
    <div>80</div>
</div>
</div>

<div class="row">
    <div class="side">
        <div>3 star</div>
    </div>
<div class="middle">
    <div class="bar-container">
        <div class="bar-3"></div>
    </div>
</div>
<div class="side right">
    <div>15</div>
</div>
</div>

<div class="row">
    <div class="side">
        <div>4 star</div>
    </div>
<div class="middle">
    <div class="bar-container">
        <div class="bar-4"></div>
    </div>
</div>
<div class="side right">
    <div>55</div>
</div>
</div>

<script>
    // js 막대그래프의 값을 임의의 값으로 처리
    // js 난수 코딩 0.0 <=  < 1.0
    // let n = Math.random();
    // console.log(n);

    /*
    // min = 0 , max = 100
    let min = 0;
    let max = 100;
    let n = Math.floor(Math.random()*(max - min + 1)) + min;

    // body > div:nth-child(2) > div.side.right > div
    const rightDiv = document.querySelector("body > div:nth-child(2) > div.side.right > div");
    rightDiv.innerText = n;
    // body > div:nth-child(2) > div.middle > div > div
    const barDiv = document.querySelector("body > div:nth-child(2) > div.middle > div > div");
    barDiv.style.width = `${n}%`;

    // body > div:nth-child(3) > div.side.right > div
    // body > div:nth-child(4) > div.side.right > div
    // body > div:nth-child(5) > div.side.right > div
    */

    /*
    let min = 0 , max = 100;
    
    for (let i = 2; i <= 5; i++) {
        let n = Math.floor(Math.random()*(max - min + 1)) + min;
        const rightDiv = document.querySelector(`body > div:nth-child(${i}) > div.side.right > div`);
        rightDiv.innerText = n;
        
        const barDiv = document.querySelector(`body > div:nth-child(${i}) > div.middle > div > div`);
        barDiv.style.width = `${n}%`;
         }
        */

</script>
<script>
    //jquery 막대그래프의 값을 임의의 값으로 처리
     // alert($(".row .middle .bar-container div").length);
    //     .each( function )
    // function
    // Type: Function( Integer index, Element element )
    $(".row .middle .bar-container div").each(function(index, element){
        let n = Math.floor(Math.random()*101);
        //element.style.width = `${n}%`;
        // element = <시작>내용</닫기>
        $(element).css("width", `${n}%`)
                    .closest(".middle").next().first().text(n);

        // this 둘이 다르다. 
        // $(this)

    });

    /*
    let min = 0 , max = 100;
    for (let i = 2; i <= 5; i++) {
        let n = Math.floor(Math.random()*(max - min + 1)) + min;
        const rightDiv = $(`body > div:nth-child(${i}) > div.side.right > div`);
        rightDiv.text(n);
        
        const barDiv = $(`body > div:nth-child(${i}) > div.middle > div > div`);
        barDiv.width(`${n}%`)
         }
    */

    /*
    for (var i = 1; i <= 4; i++) {
   let n = Math.floor(Math.random() * (max - min + 1)) + min;
   $(`.bar-${i}`).css("width", `${n}%`).parent().parent().next().children().text(n);
  }
  */
</script>

</body>
</html>